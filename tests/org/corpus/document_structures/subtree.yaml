lex: "Global"
parse: "Top"
expected: "Flat"
items:
  - name: "Trailing markup in subtree with tags"
    source: "**** COMPLETED Try =atmospace= :test##assesment##viability:"
    debug:
      doParse: false

  - name: "Trailing markup in subtree"
    source: "***** COMPLETED Update sizes of the setting grid element to use ~@scale~"
    debug:
      doParse: false

  - name: "Trailing colon for subtree name"
    source: "****** Pros:"
    debug:
      doLex: false

  - name: "Regular subtree"
    source: "* Subtree"
    base_tokens:
      - {kind: SubtreeStars, str: "*"}
      - {kind: Whitespace, str: " "}
      - {kind: Word, str: Subtree}
      - {kind: EndOfFile, str: ""}

    tokens:
      - {kind: SubtreeStars, str: "*"}
      - {kind: Space, str: " "}
      - {kind: ParagraphStart}
      - {kind: Word, str: "Subtree"}
      - {kind: ParagraphEnd}
      - {kind: SubtreeEnd}

  - name: "Subtree with time annotations"
    source: "* [2023-03-05] Subtree title"
    debug:
      doParse: false
    tokens:
      - {kind: SubtreeStars, str: "*"}
      - {kind: SkipSpace, str: " "}
      - {kind: ParagraphStart}
      - {kind: InactiveTimeBegin, str: "["}
      - {kind: StaticTimeDatePart, str: "2023-03-05"}
      - {kind: InactiveTimeEnd, str: "]"}
      - {kind: Space, str: " "}
      - {kind: Word, str: Subtree}
      - {kind: Space, str: " "}
      - {kind: Word, str: title}
      - {kind: ParagraphEnd}
      - {kind: SubtreeEnd}

  - name: "Subtree with nested content"
    source: "** CLI Tools\n\nNested content"
    debug:
      doParse: false
    tokens:
      - {kind: SubtreeStars, str: "**"}
      - {kind: SkipSpace, str: " "}
      - {kind: SubtreeTodoState, str: "CLI"}
      - {kind: SkipSpace, str: " "}
      - {kind: ParagraphStart}
      - {kind: Word, str: "Tools"}
      - {kind: ParagraphEnd}
      - {kind: SkipNewline, str: "\n"}
      - {kind: SubtreeEnd}
      - {kind: SkipNewline, str: "\n"}
      - {kind: ParagraphStart}
      - {kind: Word, str: Nested}
      - {kind: Space, str: " "}
      - {kind: Word, str: content}
      - {kind: ParagraphEnd}

  - name: "Headline after paragraph"
    debug:
      doParse: false
    source: |
      Paragraph text
      * New headline

    tokens:
      - {kind: ParagraphStart}
      - {kind: Word, str: Paragraph}
      - {kind: Space, str: " "}
      - {kind: Word, str: text}
      - {kind: Newline, str: "\n"}
      - {kind: ParagraphEnd}
      - {kind: SubtreeStars, str: "*"}
      - {kind: SkipSpace, str: " "}
      - {kind: ParagraphStart}
      - {kind: Word, str: New}
      - {kind: Space, str: " "}
      - {kind: Word, str: headline}
      - {kind: ParagraphEnd}
      - {kind: SkipNewline, str: "\n"}
      - {kind: SubtreeEnd}



  - name: "Lorem ipsum subtree"
    debug:
      traceLexBase: true
      lexToFile: true
      traceParse: true
      parseToFile: true
      semToFile: true
      printLexedToFile: true
      printParsedToFile: true
      printBaseLexedToFile: true
      printSemToFile: true
      
    file: org/lorem_ipsum_subtree.org

